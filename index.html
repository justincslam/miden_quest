<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>MQO Calcs!</title>
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <script src="static/js/lib/jquery.js"></script>
    <script src="static/js/lib/react.js"></script>
    <script src="static/js/lib/react-dom.js"></script>
    <script src="static/js/lib/redux.js"></script>
    <script src="static/js/lib/react-redux.js"></script>
    <script src="static/js/lib/babel.js"></script>
    <script src="static/js/lib/lodash.js"></script>
  </head>
  <body>
    <a href="https://github.com/trigunshin/miden_quest"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
    <div class='container'>
      <div class='row'><h5>Thanks to Ikitoro, boxie, Jaxy, varin and the rest of the MQO community for formula help!</h5></div>
    </div>
    <div id="app"></div>
    <script>
      var jsxMain = $.get("static/js/app.jsx", {dataType: 'text'}),// $.getJSON returns a Deferred
        buildings = $.get("static/js/buildings.jsx", {dataType: 'text'}),
        miscCalcs = $.get("static/js/miscCalculators.jsx", {dataType: 'text'}),
        resourceCalcs = $.get("static/js/resourceCalculators.jsx", {dataType: 'text'}),
        tsCalcs = $.get("static/js/tsCalculators.jsx", {dataType: 'text'}),
        expeditionCalcs = $.get("static/js/expeditionCalculators.jsx", {dataType: 'text'}),
        reducers = $.get("static/js/reducers.jsx", {dataType: 'text'}),
        defaultStates = $.getScript("static/js/defaultStates.js"),
        all   = $.when(jsxMain, defaultStates, buildings, miscCalcs, resourceCalcs, tsCalcs, expeditionCalcs, reducers);    // and $.when groups several Deferreds

      // example usage - you can do the same for the individual files
      all.done(function () {
        var data = ''.concat(buildings.responseText, miscCalcs.responseText, resourceCalcs.responseText, tsCalcs.responseText, expeditionCalcs.responseText, reducers.responseText, jsxMain.responseText);

        var output = Babel.transform(data, {presets: ['es2015', 'react']}).code;
        // Create a new script tag of `javascript` type
        var new_script = document.createElement('script');
        new_script.setAttribute('type', 'text/javascript');
        // Set the contents of the script to the transpiled code
        new_script.textContent = output;
        // Inject the new transpiled JS
        document.querySelector('body').appendChild(new_script);
      });
      all.fail(function () {});
      all.always(function () {});
    </script>
  </body>
</html>
